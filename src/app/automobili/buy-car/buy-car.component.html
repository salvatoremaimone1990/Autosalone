<!DOCTYPE html>
<html>
<head>
  <title>Acquisto con Stripe</title>
  <script src="https://js.stripe.com/v3/"></script>
  <style>
    .container {
      max-width: 400px;
      margin: 0 auto;
      padding: 20px;
      text-align: center;
    }

    h1 {
      font-size: 24px;
      margin-bottom: 20px;
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      font-size: 16px;
      margin-bottom: 5px;
    }

    #card-element {
      border: 1px solid #ccc;
      padding: 10px;
      border-radius: 4px;
    }

    .pay-button {
      background-color: #007bff;
      color: #fff;
      border: none;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 4px;
      cursor: pointer;
    }

    .pay-button:hover {
      background-color: #0056b3;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Acquisto con Stripe</h1>

    <form id="payment-form">
      <div class="form-group">
        <label for="card-element">Inserisci i dettagli della carta di credito:</label>
        <div id="card-element">
          <!-- Elemento in cui verrÃ  visualizzato l'input della carta -->
        </div>
      </div>
    
      <button class="pay-button" onclick="effettuaAcquisto()">Paga</button>
    </form>
  </div>

  <script>
    // Inizializzazione di Stripe
    var stripe = Stripe('pk_test_XXXXXXXXXXXXXXXXXXXXXXXX'); // Sostituisci con la tua chiave pubblica di Stripe
    var elements = stripe.elements();
    var cardElement = elements.create('card');

    // Montaggio dell'elemento della carta di credito
    cardElement.mount('#card-element');

    // Gestione dell'invio del modulo di pagamento
    var form = document.getElementById('payment-form');
    form.addEventListener('submit', function(event) {
      event.preventDefault();

      stripe.createToken(cardElement).then(function(result) {
        if (result.error) {
          // Gestisci gli errori della validazione della carta
          console.error(result.error);
        } else {
          // Invia il token al tuo server
          var token = result.token.id;
          // Esegui la logica dell'acquisto o invia il token al server per l'elaborazione
          effettuaAcquisto(token);
        }
      });
    });

    // Funzione per eseguire l'acquisto o inviare il token al server per l'elaborazione
    function effettuaAcquisto(token) {
      // Esegui le operazioni necessarie per l'acquisto, ad esempio invia il token al tuo server
      console.log('Acquisto effettuato con successo!');
      console.log('Token: ' + token);

      // Reindirizza alla dashboard di Stripe per completare il pagamento di test
      window.location.href = 'https://dashboard.stripe.com/test/payments/' + token;
    }
  </script>
</body>
</html>
